<html><!-- #BeginTemplate "/Templates/spydocs.dwt" -->
<head>
<!-- #BeginEditable "doctitle" --> 
<title>P6Spy Documentation</title><!-- #EndEditable -->
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>

<body bgcolor="#FFFFFF">
<table width="100%" border="0" bgcolor="black">
<tr>
<td>
<img src="http://www.p6spy.com/documentation/images/header.gif" width="580" height="80"> 
<br> 
<table width="580" border="0">
  <tr> 
    <td width="11%"><a href="http://www.p6spy.com"><img src="http://www.p6spy.com/documentation/images/p6spy_com.gif" width="110" height="20" border="0"></a></td>
    <td width="11%"><a href="http://www.p6spy.com/documentation/index.htm"><img src="http://www.p6spy.com/documentation/images/index.gif" width="110" height="20" border="0"></a></td>
    <td width="11%"><a href="http://www.p6spy.com/documentation/install.htm"><img src="http://www.p6spy.com/documentation/images/install.gif" width="110" height="20" border="0"></a></td>
    <td width="11%"><a href="http://www.p6spy.com/documentation/p6log.htm"><img src="http://www.p6spy.com/documentation/images/p6log.gif" width="110" height="20" border="0"></a></td>
    <td width="11%"><a href="http://www.p6spy.com/documentation/p6outage.htm"><img src="http://www.p6spy.com/documentation/images/p6outage.gif" width="110" height="20" border="0"></a></td>
    <td width="38%">&nbsp;</td>
  </tr>
</table>
</td>
</tr>
</table>
<br>
<!-- #BeginEditable "body" --> 
<div align="center"> 
  <p><a name="install"></a><font face="Verdana, Arial, Helvetica, sans-serif" size="4"><b>P6Spy 
    Installation</b></font></p>
</div>
<div align="left"> 
  <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2">This installation 
    documentation contains instructions for installing P6Spy with various application 
    servers. In addition, it contains general installation instructions for application 
    servers not listed and applications that do not use application servers. Keep 
    in mind that the <a href="install.htm#unspec">Unspecified Application Server</a> 
    instructions do not contain details specific to your application server. Use 
    them only as a guideline. </font><font face="Verdana, Arial, Helvetica, sans-serif" size="2">If 
    you create instructions for other application servers, send us a copy for 
    possible publication in the documentation. </font></p>
  <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2">The installed 
    P6Spy software offers many configuration options. See <a href="other.htm">Common 
    Property File Settings</a> for additional information.</font></p>
</div>
<div align="left"> 
  <p><font face="Verdana, Arial, Helvetica, sans-serif" size="4"><b><a name="jboss"></a>JBoss&#153;</b></font></p>
  <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2">The following 
    sections contain specific information on installing P6Spy on <a href="install.htm#jboss2">JBoss 
    2.x</a> and <a href="install.htm#jboss3">JBoss 3.x</a>.</font></p>
</div>
<div align="left"></div>
<blockquote> 
  <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="4"><b><a name="jboss2"></a>JBoss 
    2.x</b></font></div>
  <div align="left"> 
    <p>&nbsp;</p>
    <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2">The following 
      instructions were tested with various JBoss versions ranging from JBoss 
      2.2.2-2.4.4 with Jakarta Tomcat 3.2.2-4.0.1 integration. To install P6Spy 
      on JBoss 2.x, complete the following steps:</font></p>
  </div>
  <ol>
    <li> 
      <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Unjar 
        the <b>p6spy-install.jar</b> file.&nbsp;The<b> p6spy-install.jar</b> file 
        contains <b>p6spy.jar</b> and <b>spy.properties</b>.</font></div>
    </li>
    <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Move the <b>p6spy.jar</b> 
      file to your <b>ext</b> directory. An example of the path to your <b>ext</b> 
      directory is <b>C:\JBoss-2.2.2_Tomcat-3.2.2\jboss\lib\ext</b>.</font></li>
    <li> 
      <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Move 
        the <b>spy.properties</b> file to your <b>db</b> directory, which is part 
        of the JBoss classpath<b>.</b> An example of the path to your <b>db</b> 
        directory is <b>C:\JBoss-2.2.2_Tomcat-3.2.2\jboss\db</b>.</font></div>
    </li>
    <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Modify the<b> 
      jboss.jcml</b> file in the Tomcat <b>conf</b> directory to use the P6Spy 
      driver, by removing your existing driver from the drivers attribute and 
      replacing it with the P6Spy driver. An example of an edited <b>jboss.jcml</b> 
      file follows:</font> </li>
  </ol>
</blockquote>
<div align="left"> 
  <ol>
    <blockquote> 
      <blockquote> 
        <blockquote> 
          <p><font face="Courier New, Courier, mono" size="2">&lt;mbean code=&quot;org.jboss.jdbc.JdbcProvider&quot; 
            name=&quot;DefaultDomain:service=JdbcProvider&quot;&gt;<br>
            &lt;attribute name=&quot;Drivers&quot;&gt;com.p6spy.engine.spy.P6SpyDriver&lt;/attribute&gt;<br>
            &lt;/mbean&gt;</font></p>
        </blockquote>
      </blockquote>
    </blockquote>
  </ol>
</div>
<ol start="5">
  <ol start="5">
    <li> 
      <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Modify 
        the realdriver line in the <b>spy.properties</b> file to reflect the wrapped 
        database driver</font>.&nbsp;<font face="Verdana, Arial, Helvetica, sans-serif" size="-1">An 
        example of a modified realdriver line follows</font>:</font></div>
      <div align="left"><br>
      </div>
    </li>
  </ol>
  <div align="left"></div>
  <blockquote> 
    <blockquote> 
      <blockquote> 
        <div align="left"><font face="Courier New, Courier, mono" size="2">realdriver 
          = oracle.jdbc.driver.OracleDriver</font></div>
      </blockquote>
    </blockquote>
  </blockquote>
</ol>
<blockquote> 
  <div align="left"> 
    <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Installation 
      is complete.&nbsp;&nbsp;When you run your application, a <b>spy.log</b> 
      file is generated in the <b>bin</b> directory of the JBoss server. <font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">The 
      log file contains a list of all of the database statements executed.</font></font></font></font></font></font> 
      </font></font></font><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="-1">You 
      can change both the destination of <b>spy.log </b>and what it logs by editing 
      the <b>spy.properties</b> file (see <a href="other.htm">Common Property 
      File Settings</a>).</font></font></font></font></font></font></font></p>
  </div>
  <div align="left"></div>
</blockquote>
<div align="left"> </div>
<blockquote> 
  <div align="left"> 
    <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="4"><b><a name="jboss3"></a>JBoss 
      3.x</b></font></div>
  </div>
  <div align="left"> 
    <p><font face="Verdana, Arial, Helvetica, sans-serif" size="-1"><i>(Contributed 
      by Alan Arvesen, IronGrid)</i></font></p>
  </div>
  <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">The 
    following instructions were tested on JBoss 3.0.4 with Jetty integration. 
    For these instructions, P6Spy assumes that you are using the default server 
    residing in <b>%JBOSS_DIST%/server/default</b>. These instructions are intended 
    for wrapping driver services, not XADataSource services. To install P6Spy 
    on JBoss 3.x, complete the following steps:</font></div>
  <ol>
    <li> 
      <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Unjar 
        the<b> p6spy-install.jar</b> file.&nbsp;The <b>p6spy-install.jar</b> file 
        contains <b>p6spy.jar</b> and <b>spy.properties</b>.</font></div>
    </li>
    <li> 
      <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Move 
        the <b>p6spy.jar</b> file to the <b>lib</b> directory of the server you 
        will run. An example of the path to your <b>lib</b> directory is <b>C:\java\jboss-3.0.4\server\default\lib</b>.</font></div>
    </li>
    <li> 
      <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Add 
        <b>spy.properties</b> to your JBoss classpath<b>.</b> By default, the 
        JBoss classpath set up by <b>run.bat</b> only points to <b>tools.jar</b> 
        and <b>run.jar</b>. You may need to add a directory, via JBOSS_CLASSPATH, 
        to this path. An example of an edited JBoss classpath follows:</font></div>
    </li>
  </ol>
</blockquote>
<div align="left"> </div>
<div align="left"> 
  <blockquote> 
    <blockquote> 
      <blockquote> 
        <blockquote> 
          <p><font face="Courier New, Courier, mono" size="2">C:\&gt; set JBOSS_CLASSPATH=C:\java\jboss-3.0.4\server\default\db 
            </font></p>
          <p><font face="Courier New, Courier, mono" size="2">C:\&gt; copy C:\java\p6spy\spy.* 
            C:\java\jboss-3.0.4\server\default\db</font></p>
        </blockquote>
      </blockquote>
    </blockquote>
  </blockquote>
</div>
<ol start="4">
  <div align="left"> </div>
  <ol start="4">
    <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Create a <b>p6spy-service.xml</b> 
      file in <b>%server%\deploy</b>. Set the config-property element named DriverClass 
      to P6SpyDriver in <b>p6spy-service.xml</b>, by basing a new XML file on 
      the the one of the examples in the <b>%JBOSS_DIST%\docs\examples\jca</b> 
      directory. You can also configure JndiName and ConnectionURL for your specific 
      implementation. An example of the pertinent portions (not the complete XML 
      file) of a <b>p6spy-service.xml</b> file follows: </font> </li>
  </ol>
  <blockquote> 
    <blockquote> 
      <blockquote> 
        <p>&nbsp;</p>
        <p><font face="Courier New, Courier, mono" size="2">&lt;attribute name=&quot;JndiName&quot;&gt;MySqlDS&lt;/attribute&gt;</font></p>
        <p><font face="Courier New, Courier, mono" size="2">&lt;attribute name=&quot;ManagedConnectionFactoryProperties&quot;&gt;</font></p>
        <p><font face="Courier New, Courier, mono" size="2">&lt;properties&gt;</font></p>
        <blockquote> 
          <p><font face="Courier New, Courier, mono" size="2"> &lt;config-property 
            name=&quot;ConnectionURL&quot;</font></p>
          <blockquote> 
            <p><font face="Courier New, Courier, mono" size="2">type=&quot;java.lang.String&quot;&gt;jdbc:mysql://localhost/localdb&lt;/config-property&gt;</font></p>
          </blockquote>
          <p><font face="Courier New, Courier, mono" size="2">&lt;config-property 
            name=&quot;DriverClass&quot;</font></p>
          <blockquote> 
            <p><font face="Courier New, Courier, mono" size="2">type=&quot;java.lang.String&quot;&gt;com.p6spy.engine.spy.P6SpyDriver&lt;/config-property&gt;</font></p>
          </blockquote>
          <div align="left"></div>
        </blockquote>
        <div align="left"></div>
      </blockquote>
    </blockquote>
    <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><b>Note:</b> 
      Make sure there is not a service that explicitly loads the wrapped driver. 
      A service of this type will load the specified driver before P6SpyDriver, 
      resulting in unwrapped connections.</font></div>
  </blockquote>
  <ol start="5">
    <li> 
      <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"> 
        Modify the realdriver line in the <b>spy.properties</b> file to reflect 
        your wrapped database driver.&nbsp;<font face="Verdana, Arial, Helvetica, sans-serif" size="-1">An 
        example of a modified realdriver line follows</font>:</font></font></div>
    </li>
  </ol>
  <blockquote> 
    <blockquote> 
      <blockquote> 
        <p>&nbsp;</p>
        <p><font face="Courier New, Courier, mono" size="2">realdriver=org.gjt.mm.mysql.Driver</font></p>
      </blockquote>
    </blockquote>
  </blockquote>
</ol>
<div align="left"></div>
<blockquote> 
  <div align="left"> 
    <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Installation 
      is complete.&nbsp;When you run your application, a log file <font face="Verdana, Arial, Helvetica, sans-serif" size="2">(<b>spy.log</b>)</font> 
      is generated in the <b>bin</b> directory of the JBoss server. <font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">The 
      log file contains a list of all of the database statements executed.</font></font></font></font></font></font> 
      </font></font></font></font><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="-1">You 
      can change both the destination of <b>spy.log </b>and what it logs by editing 
      the <b>spy.properties</b> file (see <a href="other.htm">Common Property 
      File Settings</a>).</font></font></font></font></p>
  </div>
  <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"></font></div>
  <div align="left"></div>
</blockquote>
<div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"> 
  <p><font face="Verdana, Arial, Helvetica, sans-serif" size="4"><b><a name="orion"></a>Orion</b></font></p>
  <p>The following instructions have been tested with Orion. To install P6Spy 
    on Orion, complete the following steps: </p>
  <ol>
    <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Unjar the 
      <b>p6spy-install.jar</b> file.&nbsp;The<b> p6spy-install.jar</b> file contains 
      <b>p6spy.jar</b> and <b>spy.properties</b>.</font></li>
    <li>Move<font face="Verdana, Arial, Helvetica, sans-serif" size="2"> <b>p6spy.jar</b> 
      and <b>spy.properties</b> to your <b>[<i>orion-home</i>]\lib</b> directory. 
      An example of the path to your <font face="Verdana, Arial, Helvetica, sans-serif" size="2"><b>[<i>orion-home</i>]\lib</b></font> 
      directory is <b>C:\orion\lib</b>.</font></li>
    <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Modify the 
      connection-driver line in<b> [<i>orion-home</i>]\config\data-sources.xml</b> 
      to use P6SpyDriver.&nbsp;An example of an edited <b>data-sources.xml</b> 
      file follows:</font> </li>
    <blockquote> 
      <blockquote> 
        <p> <font face="Courier New, Courier, mono" size="2">&lt;data-source<br>
          class=&quot;com.evermind.sql.DriverManagerDataSource&quot;<br>
          name=&quot;Hypersonic&quot;<br>
          location=&quot;jdbc/HypersonicCoreDS&quot;<br>
          xa-location=&quot;jdbc/xa/HypersonicXADS&quot;<br>
          ejb-location=&quot;jdbc/HypersonicDS&quot;<br>
          connection-driver=&quot;com.p6spy.engine.spy.P6SpyDriver&quot;<br>
          username=&quot;sa&quot;<br>
          password=&quot;&quot;<br>
          url=&quot;jdbc:HypersonicSQL:./database/defaultdb&quot;<br>
          inactivity-timeout=&quot;30&quot;<br>
          /&gt;</font></p>
      </blockquote>
    </blockquote>
  </ol>
  </font></div>
<ol start="4">
  <li> 
    <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"> 
      <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">In 
        the example installation outlined above, Orion cannot locate <b>spy.properties</b> 
        because of the classpath that Orion uses. Use the -D option to tell Orion 
        where the property file resides by running Orion using the following command:</font></font></div>
      </font></div>
    <blockquote> 
      <blockquote><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Courier New, Courier, mono" size="2">java 
        -Dp6.home=c:\orion\orion\lib -jar orion.jar</font></font></blockquote>
    </blockquote>
  </li>
</ol>
<div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"></font></div>
<div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"></font></div>
<div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"> 
  <ol start="5">
    <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Modify the 
      realdriver line in the <b>spy.properties</b> file to reflect the wrapped 
      database driver.&nbsp;(This is the original value specified in connection-driver.) 
      For example, if Hypersonic (the default database) was the original connection-driver 
      value, the realdriver value is set to org.hsql.jdbcDriver.</font></li>
  </ol>
  </font></div>
<div align="left"> 
  <div align="left"> </div>
  <blockquote> 
    <blockquote> 
      <blockquote> 
        <div align="left"></div>
      </blockquote>
    </blockquote>
  </blockquote>
  <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Installation 
    is complete.&nbsp;</font></font><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">When 
    you run your application, a log file (<b>spy.log</b>) is generated in the 
    <b>[<i>orion-home</i>]</b> directory of the Orion server.</font><b><font face="Verdana, Arial, Helvetica, sans-serif" size="2">&nbsp;</font></b><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">The 
    log file contains a list of all of the database statements executed.</font></font></font></font></font></font> 
    <font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="-1">You 
    can change both the destination of <b>spy.log </b>and what it logs by editing 
    the <b>spy.properties</b> file (see <a href="other.htm">Common Property File 
    Settings</a>)</font></font></font></font></font></font></font></p>
</div>
<blockquote> 
  <blockquote>&nbsp;</blockquote>
</blockquote>
<div align="left"></div>
<div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"> 
  <p><font face="Verdana, Arial, Helvetica, sans-serif" size="4"><b><a name="tomcat"></a>Jakarta 
    Tomcat</b></font></p>
  <p>The following <font face="Verdana, Arial, Helvetica, sans-serif" size="2"> 
    instructions were tested with Jakarta Tomcat 3.x.&nbsp;&nbsp;Note that since 
    you typically write or otherwise obtain your own connection pool when using 
    Tomcat, these instructions will differ by application. To install P6Spy on 
    Jakarta Tomcat, complete the following steps:</font></p>
  <ol>
    <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Unjar the 
      <b>p6spy-install.jar</b> file.&nbsp;The <b>p6spy-install.jar</b> file contains 
      <b>p6spy.jar</b> and <b>spy.properties</b>. </font></li>
    <li>Move the <font face="Verdana, Arial, Helvetica, sans-serif" size="2"><b>p6spy.jar</b> 
      and <b>spy.properties</b> files to the <b>lib\</b> directory of your web 
      application. An example of the path to your <b>lib\</b> directory is <b>C:\jakarta-tomcat-3.2.1\webapps\p6\WEB-INF\lib</b></font>. 
    </li>
    <li> 
      <div align="left">Modify <font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Tomcat 
        to use P6Spy as the P6Spy driver. <font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Tomcat 
        applications obtain their JDBC connection in a variety of ways. Most applications 
        have the database driver name externalized as a configuration parameter. 
        For example, in your <b>web.xml</b> file (<b>C:\jakarta-tomcat-3.2.1\webapps\p6\WEB-INF\web.xml</b>) 
        you may have something similar to the following:</font></font></font></font></div>
    </li>
  </ol>
  </font></div>
<blockquote> 
  <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"> 
    <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Courier New, Courier, mono">&lt;init-param&gt;&lt;param-name&gt;databaseDriver&lt;/param-name&gt;&lt;param-value&gt;org.gjt.mm.mysql.Driver&lt;/param-value&gt;&lt;/init-param&gt;</font><br>
      <br>
      In this above case, the databaseDriver parameter has a value of <b>org.gjt.mm.mysql.Driver</b>, 
      which is the MySQL driver. Wherever this configuration information is stored, 
      change the driver name (<b>org.gjt.mm.mysql.Driver</b> in our example) to 
      <b>com.p6spy.engine.spy.P6SpyDriver</b>, as in the following example:<br>
      <br>
      <font face="Courier New, Courier, mono">&lt;init-param&gt;&lt;param-name&gt;databaseDriver&lt;/param-name&gt;&lt;param-value&gt;com.p6spy.engine.spy.P6SpyDriver&lt;/param-value&gt;&lt;/init-param&gt;</font><br>
      </font></font></div>
    </font></div>
</blockquote>
<div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"> 
  <ol start="4">
    <li> 
      <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Enable 
        Tomcat to locate <b>spy.properties. </b>While all of the JAR files in 
        your <b>lib\</b> directory are, by default, included in Tomcat's classpath, 
        the <b>lib\</b> directory itself is not. This means Tomcat will not be 
        able to find your <b>spy.properties</b> file, which will result in an 
        error. So, you must include <b>spy.properties</b> in the Tomcat classpath. 
        Use the TOMCAT_OPTS environment variable to specify the location of the 
        <b>spy.properties</b> file. An example of the edited TOMCAT_OPTS environment 
        variable follows:<br>
        <br>
        <font face="Courier New, Courier, mono">SET TOMCAT_OPTS=-Dp6.home=C:\jakarta-tomcat-3.2.1\webapps\p6\WEB-INF\lib</font><br>
        <br>
        </font></font></div>
    </li>
    <li>Modify<font face="Verdana, Arial, Helvetica, sans-serif" size="2"> the<b> 
      spy.properties </b>file to reflect the wrapped database driver.<b> </b> 
      <font face="Verdana, Arial, Helvetica, sans-serif" size="-1">An example 
      of a modified realdriver line </font><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">(using 
      MySQL as the driver)</font></font> <font face="Verdana, Arial, Helvetica, sans-serif" size="-1">follows</font>: 
      </font></li>
  </ol>
  </font></div>
<blockquote> 
  <blockquote> 
    <blockquote> 
      <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Courier New, Courier, mono" size="2">realdriver 
        = org.gjt.mm.mysql.Driver</font></font></div>
    </blockquote>
  </blockquote>
</blockquote>
<div align="left"> 
  <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Installation 
    is complete. <font size="-1">When you run your application, a log file (<b>spy.log</b>) 
    is generated in the directory from which you launched the application.</font><b> 
    </b> <font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">The 
    log file contains a list of all of the database statements executed.</font></font></font></font></font></font> 
    <font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="-1">You 
    can change both the destination of <b>spy.log </b>and what it logs by editing 
    the <b>spy.properties</b> file (see <a href="other.htm">Common Property File 
    Settings</a>).</font></font></font><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"> 
    </font></font></font></font></font></font></font></p>
  <p>&nbsp;</p>
</div>
<div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"> 
  <p><a name="jonas"></a><b><font face="Verdana, Arial, Helvetica, sans-serif" size="+1">JOnAS 
    EJB </font></b>
  <p><font face="Verdana, Arial, Helvetica, sans-serif" size="-1"><i><font size="2">(Contributed 
    by François Exertier, JOnAS Opensource EJB Server team)</font></i> </font> 
  <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2">The following 
    instructions were tested with JOnAS 2.3.x. To install P6Spy on JOnAS EJB, 
    complete the following steps:</font> 
  <ol>
    <li> <font face="Verdana, Arial, Helvetica, sans-serif" size="2">Unjar the 
      <b>p6spy-install.jar </b>file.&nbsp;The <b>p6spy-install.jar</b> file contains 
      <b>p6spy.jar</b> and <b>spy.properties</b>.</font></li>
    <li> <font face="Verdana, Arial, Helvetica, sans-serif" size="2">Put the <b>p6spy.jar</b> 
      file in the classpath of the JOnAS EJB server. For example, if <b>p6spy.jar</b> 
      is in the <b>/opt/Provider6</b> directory, add <b>/opt/Provider6/p6psy.jar</b> 
      to the XTRA_CLASSPATH environment variable or directly edit the <b>config_env</b> 
      script.</font></li>
    <li> <font size="2">Move </font><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><b>spy.properties</b> 
      to a directory which is part of your classpath. It is recommended that you 
      move it to the directory where your <b>jndi.properties</b> file resides.</font></li>
    <li> <font face="Verdana, Arial, Helvetica, sans-serif" size="2">Modify the 
      <b>&lt;<i>datasource</i>>.properties</b> file by replacing the database 
      driver classname with the P6Psy database driver classname in the <b>datasource.classname</b> 
      property. For example, </font><font face="Verdana, Arial, Helvetica, sans-serif" size="-1">the 
      <b>Oracle1.properties</b> file delivered with JOnAS should be updated by 
      replacing<b> oracle.jdbc.driver.OracleDriver</b> with <b><font size="2">com.p6spy.engine.spy.P6SpyDriver</font></b>. 
      An example follows:</font></li>
    <blockquote><font face="Courier New, Courier, mono">datasource.name&nbsp;&nbsp; 
      jdbc_1</font> <font face="Courier New, Courier, mono"><br>
      datasource.description&nbsp; "Standard jdbc driver for Oracle"</font> <font face="Courier New, Courier, mono"><br>
      datasource.url&nbsp;&nbsp; jdbc:oracle:thin:scott/tiger@maltes:1521:ORA1</font> 
      <font face="Courier New, Courier, mono"><br>
      datasource.classname com.p6spy.engine.spy.P6SpyDriver</font> <font face="Courier New, Courier, mono"><br>
      ...</font></blockquote>
  </ol>
  </font></div>
<div align="left"> 
  <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="-1"> 
    <b><font size="2">Note:</font></b><font size="2"> Database access configuration 
    within JOnAS is described in a DataSource property file, such as Oracle1.properties. 
    See the JOnAS Bean Programmer's Guide for more details.</font></font></font></p>
</div>
<div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"> 
  <ol start="5">
    <li>Modify the <b>spy.properties</b> file and change the realdriver line to 
      reflect the wrapped database driver.&nbsp;An example of a modified realdriver 
      line follows: </li>
  </ol>
  </font></div>
<div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Courier New, Courier, mono"></font></font></div>
<blockquote> 
  <blockquote> 
    <div align="left"><font face="Courier New, Courier, mono" size="2">realdriver 
      = oracle.jdbc.driver.OracleDriver</font></div>
  </blockquote>
</blockquote>
<div align="left"> <font face="Verdana, Arial, Helvetica, sans-serif" size="2">Installation 
  is complete.<b>&nbsp;</b>When you run your application, a log file (<b>spy.log</b>) 
  is generated in the directory from which you launched the application. The log 
  file contains a list of all of the database statements executed. You can change 
  both the destination of <b>spy.log </b>and what it logs by editing the <b>spy.properties</b> 
  file (see <a href="other.htm">Common Property File Settings</a>).</font></div>
<div align="left"> 
  <p>&nbsp;</p>
</div>
<div align="left"> 
  <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="4"><b><a name="weblogic"></a>BEA&reg; 
    WebLogic&reg;</b></font></font></p>
  <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2">The following 
    sections contain specific information on installing P6Spy on</font> <font face="Verdana, Arial, Helvetica, sans-serif" size="2"><a href="install.htm#wlportal">BEA 
    WebLogic Portal 4.0</a>, <a href="install.htm#wlserver">BEA WebLogic Server 
    6.1</a>, and <a href="install.htm#weblogic5">BEA WebLogic 5.1</a>.</font></p>
  <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><b>Note: 
    </b>IBM&#153; Cloudscape does not work with P6Spy and BEA WebLogic. However, 
    Cloudscape does<i> </i>work with P6Spy when using the J2EE reference implementation 
    server. The following suggestion was submitted by Adrian Fletcher: &quot;I 
    may be wrong but I suspect the problem with Cloudscape and WebLogic is that 
    both drivers end up registered against the same URL. I seem to remember that 
    the best trick for avoiding this is mangling the URL. If you instruct users 
    to prepend &quot;p6spy:&quot; to their URL and then remove it in your wrapped 
    file, it should work in more cases.&quot; You can do this with the <b>useprefix</b> 
    option. If anyone has an opportunity to validate this, please drop us a line 
    with updated information.</font></font></p>
</div>
<blockquote> 
  <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="4"><b><a name="wlportal"></a>BEA 
    WebLogic Portal&#153; 4.0</b></font></font></div>
  <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif" size="-1"><i>(Contributed 
    by Philip Ogren, BEA)</i></font></font> </font></div>
  <div align="left"> 
    <p>&nbsp;</p>
    <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">These 
      instructions were tested with WebLogic Server 6.1 Service Pack 2 with WebLogic 
      Portal 4.0 Service Pack 1 running on Microsoft<font face="Verdana, Arial, Helvetica, sans-serif" size="2">&reg;</font> 
      Windows&reg; using the following:</font><font face="Verdana, Arial, Helvetica, sans-serif"><font size="2"> 
      </font></font> </font></p>
  </div>
  <ul>
    <li> 
      <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">WebLogic 
        jDriver for Oracle&reg; </font> </font></div>
    </li>
    <li> 
      <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Oracle 
        Thin driver for 8.1.7 </font> </font></div>
    </li>
    <li> 
      <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">WebLogic 
        jDriver for Microsoft SQL Server&#153; </font> </font></div>
    </li>
    <li> 
      <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Sybase&#153; 
        jConnect-5_2 driver</font></font></div>
    </li>
  </ul>
  <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2" color="#CC0000">The 
    default Stockportal ('Avitek') application is used in this example. </font><font face="Verdana, Arial, Helvetica, sans-serif" size="2">To 
    install P6Spy on BEA WebLogic Portal, complete the following steps:</font></font></div>
  <ol>
    <li> 
      <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Unjar 
        the <b>p6spy-install.jar</b> file to a temporary directory. The <b>p6spy-install.jar</b> 
        file contains the files <b>p6spy.jar</b> and <b>spy.properties</b>.</font></div>
    </li>
    <li> 
      <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Move 
        <b>p6spy.jar</b> to <b>&lt;bea-home&gt;\wlportal4.0\lib\ext</b>.</font></div>
    </li>
    <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Add <b>;%P13N_DIR%\lib\ext\p6spy.jar</b> 
      to EXT_CLASSPATH in the set-environment.bat file (<b>&lt;bea-home&gt;\wlportal4.0\bin\win32\set-environment.bat</b>). 
      Do not include any trailing spaces after the new line.</font></li>
    <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Move <b>spy.properties</b> 
      to <b>&lt;bea-home&gt;\wlportal4.0\config\portalDomain</b> or to the application's 
      domain directory.</font> </li>
    <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Modify the 
      <b>spy.properties</b> file and change the realdriver line to reflect your 
      wrapped database driver.&nbsp;An example of a modified realdriver line follows<font face="Verdana, Arial, Helvetica, sans-serif" size="2">: 
      </font></font> 
      <blockquote> 
        <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Courier New, Courier, mono">realdriver=weblogic.jdbc.oci.Driver</font></font></p>
      </blockquote>
    </li>
    <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Add <b>;%P13N_DIR%\config\portalDomain</b> 
      to the classpath in the <b>startPortal.bat</b> file (<b>&lt;bea-home&gt;\wlportal4.0\config\portalDomain\startPortal.bat</b>). 
      Do not include any trailing spaces after the new line.</font></li>
    <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Modify WebLogic 
      Portal to use the P6Spy driver. Either modify <b>&lt;bea-home&gt;\wlportal4.0\config\portalDomain\config.xml</b> 
      directly or by completing the following steps:</font> 
      <ol type="i">
        <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Start 
          WebLogic Portal using <b>&lt;bea-home&gt;\wlportal4.0\config\portalDomain\startPortal.bat</b>.</font></li>
        <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Start 
          the Administration Console tool by navigating to http://&lt;<i>your-host</i>&gt;:7501/console.</font></li>
        <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Navigate 
          to the &lt;<i>your-domain</i>&gt;, <font color="#CC0000">THEN Services, 
          THEN, JDBC, THEN Connection Pools</font> node and set the Driver Classname 
          for each Connection Pool to <b>com.p6spy.engine.spy.P6SpyDriver</b>. 
          </font></li>
      </ol>
    </li>
    <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">If using RDBMS 
      Security Realm, configure P6Spy to monitor it by completing the following 
      steps: </font> 
      <ol type="i">
        <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Using 
          the Administration Console, navigate to the <font color="#CC3333">&lt;your-domain&gt;, 
          then Security then Realms</font> node.</font></li>
        <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Select 
          the security realm. <font color="#CC3333">and observe config? why?</font></font></li>
        <li><font color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="2">C</font><font color="#CC3333" face="Verdana, Arial, Helvetica, sans-serif" size="2"><font color="#000000">lick 
          the <b>Database</b> tab.</font></font></li>
        <li><font color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="2">Set 
          the Driver parameter to <b>com.p6spy.engine.spy.P6SpyDriver</b>.</font></li>
        <li><font color="#CC3333" face="Verdana, Arial, Helvetica, sans-serif" size="2">In 
          this example, modifications to the commercePool, dataSyncPool, and wlcsRealm 
          should be made. ARE THESE all security realms? what mods?</font><font color="#CC3333" face="Courier New, Courier, mono" size="2"> 
          </font></li>
      </ol>
    </li>
    <li><font color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="2">Using 
      the Administration Console, shut down WebLogic Portal. <font color="#CC3333">THIS 
      can be done by right-clicking on the &lt;your-domain&gt;. THEN Servers, 
      THEN &lt;your-server&gt; node and </font>selecting <b>Stop this Server </b>from 
      the pop-up menu.</font></li>
    <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Restart WebLogic 
      Portal with the <b>&lt;bea-home&gt;\wlportal4.0\config\portalDomain\startPortal.bat</b> 
      script.</font></li>
  </ol>
  <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Installation 
    is complete. </font><font face="Verdana, Arial, Helvetica, sans-serif" size="2">When 
    you run your application, a log file (<b>spy.log</b>) is generated in the 
    directory from which you launched the application. The log file contains a 
    list of all of the database statements executed. You can change both the destination 
    of <b>spy.log </b>and what it logs by editing the <b>spy.properties</b> file 
    (see <a href="other.htm">Common Property File Settings</a>). <font color="#CC0033">Observe 
    log msges in the file specified by the logfile property set in spy.properties. 
    Default location is &lt;bea-home&gt;\wlportal4.0.</font></font></p>
  <blockquote> 
    <div align="left"> </div>
  </blockquote>
  <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="4"><b><a name="wlserver"></a> 
    BEA WebLogic Server&#153; 6.1</b></font></font></div>
  <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="-1"><i>(Contributed 
    by Philip Ogren, BEA)</i> </font> </font></div>
  <div align="left"> 
    <p>&nbsp;</p>
    <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2">To install 
      P6Spy on BEA WebLogic Server, complete the following steps:</font></p>
  </div>
  <ol>
    <li> 
      <div align="left"> 
        <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Unjar 
          the <b>p6spy-install.jar</b> file to a temporary directory. The <b>p6spy-install.jar</b> 
          file contains the files <b>p6spy.jar</b> and <b>spy.properties</b>.</font></div>
      </div>
    </li>
    <li> 
      <div align="left"> 
        <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Move 
          <b>p6spy.jar</b> to <b>&lt;bea-home&gt;\wlserver6.1\lib\ext</b>.</font></div>
      </div>
    </li>
    <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Move <b>spy.properties</b> 
      to <b>&lt;bea-home&gt;\wlserver6.1\config\&lt;<i>your-domain</i>&gt;</b>.</font></li>
    <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Modify the 
      <b>spy.properties</b> file and change the realdriver line to reflect your 
      wrapped database driver. An example of a modified realdriver line follows:</font> 
      <blockquote> 
        <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Courier New, Courier, mono">realdriver=weblogic.jdbc.oci.Driver</font></font></p>
      </blockquote>
    </li>
    <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Add <b>;.\ext\p6spy.jar;.\config\&lt;your-domain&gt;</b> 
      to the classpath in the <b>startWebLogic.cmd</b> file (<b>&lt;bea-home&gt;\wlserver6.1\config\&lt;your-domain&gt;\startWebLogic.cmd</b>). 
      Do not include any trailing spaces after the new line. This adds <b>p6spy.jar</b> 
      and <b>spy.properties</b> to the classpath.</font></li>
    <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Modify WebLogic 
      Portal to use the P6Spy driver. Either modify <b>&lt;bea-home&gt;\wlserver6.1\config\&lt;your-domain&gt;\config.xml</b> 
      directly or by completing the following steps:</font> 
      <ol type="i">
        <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Start 
          WebLogic Portal using <b>&lt;bea-home&gt;\wlportal4.0\config\portalDomain\startPortal.bat</b>.</font></li>
        <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Start 
          the Administration Console tool by navigating to <b>http://&lt;<i>your-host</i>&gt;:7501/console</b>.</font></li>
        <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Navigate 
          to the &lt;<i>your-domain</i>&gt;, <font color="#CC0000">THEN Services, 
          THEN, JDBC, THEN Connection Pools</font> node and set the Driver Classname 
          for each Connection Pool to <b>com.p6spy.engine.spy.P6SpyDriver</b>. 
          </font></li>
      </ol>
    </li>
    <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">If using RDBMS 
      Security Realm, configure P6Spy to monitor it by completing the following 
      steps: </font> 
      <ol type="i">
        <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Using 
          the Administration Console, navigate to the <font color="#CC3333">&lt;your-domain&gt;, 
          then Security then Realms</font> node.</font></li>
        <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Select 
          the security realm. <font color="#CC3333">and observe config? why?</font></font></li>
        <li><font color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="2">C</font><font color="#CC3333" face="Verdana, Arial, Helvetica, sans-serif" size="2"><font color="#000000">lick 
          the <b>Database</b> tab.</font></font></li>
        <li><font color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="2">Set 
          the Driver parameter to <b>com.p6spy.engine.spy.P6SpyDriver</b>.</font></li>
        <li><font color="#CC3333" face="Verdana, Arial, Helvetica, sans-serif" size="2">In 
          this example, modifications to the commercePool, dataSyncPool, and wlcsRealm 
          should be made. ARE THESE all security realms? what mods?</font><font color="#CC3333" face="Courier New, Courier, mono" size="2"> 
          </font></li>
      </ol>
    </li>
    <li><font color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="2">Using 
      the Administration Console, shut down WebLogic Portal. <font color="#CC3333">THIS 
      can be done by right-clicking on the &lt;your-domain&gt;. THEN Servers, 
      THEN &lt;your-server&gt; node and </font>selecting <b>Stop this Server </b>from 
      the pop-up menu.</font></li>
    <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Restart WebLogic 
      Portal with the <b>&lt;bea-home&gt;\wlserver6.1\config\&lt;your-domain&gt;\startWebLogic.cmd</b> 
      script.</font></li>
  </ol>
  <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Installation 
    is complete. </font><font face="Verdana, Arial, Helvetica, sans-serif" size="2">When 
    you run your application, a log file (<b>spy.log</b>) is generated in the 
    directory from which you launched the application. The log file contains a 
    list of all of the database statements executed. You can change both the destination 
    of <b>spy.log </b>and what it logs by editing the <b>spy.properties</b> file 
    (see <a href="other.htm">Common Property File Settings</a>). <font color="#CC0033">Observe 
    log msges in the file specified by the logfile property set in spy.properties. 
    Default location is &lt;bea-home&gt;\wlserver6.1.</font></font></p>
  <div align="left"> 
    <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font size="2" face="Verdana, Arial, Helvetica, sans-serif"> 
      </font> </font></p>
  </div>
  <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><a name="weblogic5"></a><b><font face="Verdana, Arial, Helvetica, sans-serif" size="+1">BEA 
    WebLogic 5.1</font></b> </font></div>
  <div align="left"> 
    <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="-1"><i><font size="2">(Posted 
      by Richard Delbert on April 10, 2002 on TheServerSide.com)</font></i> </font></font></p>
  </div>
  <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">The 
    following instructions were tested with WebLogic 5.1. To install P6Spy on 
    BEA WebLogic, complete the following steps:</font></div>
  <ol>
    <li> 
      <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Unjar 
        the <b>p6spy-install.jar</b> file.&nbsp;The<b> p6spy-install.jar</b> file 
        contains <b>p6spy.jar</b> and <b>spy.properties</b>.</font></div>
    </li>
    <li> 
      <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Edit 
        <b>startWeblogic.sh</b>, by putting <b>p6spy.jar</b> in the JAVA_CLASSPATH.</font></div>
    </li>
    <li> 
      <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Edit 
        <b>startWeblogic.sh</b>, by putting <b>spy.properties</b> in the JAVA_CLASSPATH.</font></div>
    </li>
    <li> 
      <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Edit 
        <b>weblogic.properties</b> (connection pool), by replacing the JDBC class 
        driver with <b>com.p6spy.engine.spy.P6SpyDriver</b>.</font></div>
    </li>
    <li> 
      <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Modify 
        the <b>spy.properties</b> file by changing the realdriver line to reflect 
        your wrapped database driver.&nbsp;An example of a modified realdriver 
        line follows:</font></div>
    </li>
  </ol>
</blockquote>
<div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"></font></div>
<blockquote> 
  <blockquote> 
    <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Courier New, Courier, mono">realdriver 
      = oracle.jdbc.driver.OracleDriver</font></font></div>
  </blockquote>
  <div align="left"> 
    <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Installation 
      is complete.<b>&nbsp;</b>When you run your application, a log file (<b>spy.log</b>) 
      is generated in the WebLogic home directory. The log file contains a list 
      of all of the database statements executed. You can change both the destination 
      of <b>spy.log </b>and what it logs by editing the <b>spy.properties</b> 
      file (see <a href="other.htm">Common Property File Settings</a>).</font></p>
  </div>
</blockquote>
<div align="left"></div>
<div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"> 
  <p><font face="Verdana, Arial, Helvetica, sans-serif" size="4"><b><a name="atg"></a>ATG 
    Dynamo&#153;</b></font></p>
  <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2">The following 
    instructions were tested with ATG Dynamo 5.1. To install P6Spy on ATG Dynamo, 
    complete the following steps:</font></p>
  <ol>
    <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Unjar the 
      <b>p6spy-install.jar</b> file into a directory (<b>C:\p6spy</b>, in our 
      example).&nbsp;The <b>p6spy-install.jar</b> contains <b>p6spy.jar</b> and 
      <b>spy.properties</b>.</font></li>
    <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Start the 
      ATG Dynamo application server and your database.</font></li>
    <li>Modify<font face="Verdana, Arial, Helvetica, sans-serif" size="2"> the 
      ATG Dynamo server to include <b>p6spy.jar</b> a<font color="#CC3333">nd 
      <b>spy.properties</b> in its cl</font>asspath by completing the following 
      steps: </font> 
      <ol type="i">
        <li>R<font face="Verdana, Arial, Helvetica, sans-serif" size="2">un the 
          Admin Tool by logging in to <b>http://localhost:8830 </b>(This URL is 
          an example that assumes you are running ATG Dynamo on your local machine). 
          </font></li>
      </ol>
      <blockquote> 
        <p><b>Note:</b> T<font face="Verdana, Arial, Helvetica, sans-serif" size="2">he 
          default <i>user</i>/<i>pass</i> is admin/admin.</font></p>
      </blockquote>
      <ol type="i" start="2">
        <li>C<font face="Verdana, Arial, Helvetica, sans-serif" size="2">lick 
          <b>Configuration Manager</b>.</font></li>
        <li>C<font face="Verdana, Arial, Helvetica, sans-serif" size="2">lick 
          <b>Default Configuration</b>.</font></li>
        <li>C<font face="Verdana, Arial, Helvetica, sans-serif" size="2">lick 
          <b>System Paths</b>.</font></li>
        <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Enter 
          the full path of the <b>p6spy.jar</b> file under <b>Extend Dynamo's 
          Classpath</b>. An example of the path is <b>C:\p6spy\p6spy.jar;c:\p6spy</b>.</font></li>
        <li>Click<font face="Verdana, Arial, Helvetica, sans-serif" size="2"> 
          <b>Append to Classpath</b>.</font></li>
        <li>C<font face="Verdana, Arial, Helvetica, sans-serif" size="2">onfirm 
          the new classpath value is correct under <b>Extend Dynamo's Classpath</b>.</font></li>
        <li>R<font face="Verdana, Arial, Helvetica, sans-serif" size="2">estart 
          ATG Dynamo by navigating to http://localhost:8830 and clicking <b>Restart 
          Dynamo</b>.</font></li>
      </ol>
      <br>
    </li>
    <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Change the 
      <b>spy.properties</b> file to reference your database driver. You must tell 
      P6Spy about your real database driver. The realdriver property is, by default, 
      set to Oracle, as in: </font></li>
  </ol>
  </font></div>
<div align="left"><font face="Courier New, Courier, mono" size="2"></font></div>
<blockquote> 
  <blockquote> 
    <div align="left"> 
      <p><font face="Courier New, Courier, mono" size="2">realdriver = oracle.jdbc.driver.OracleDriver</font></p>
    </div>
    <div align="left"><font face="Courier New, Courier, mono" size="2"></font></div>
  </blockquote>
  <div align="left"> 
    <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Change 
      this to reflect your database. If you are using the ATG demo this would 
      be as follows:</font></font></p>
  </div>
  <blockquote> 
    <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Courier New, Courier, mono" size="2">realdriver 
      = solid.jdbc.SolidDriver</font></font></div>
  </blockquote>
</blockquote>
<div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"> 
  <ol start="5">
    <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Change ATG 
      to use the P6Spy driver<b> </b>by completing the following steps:<b><br>
      </b></font> 
      <ol type="i">
        <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2"> Run the 
          Admin Tool by logging in to <b>http://localhost:8830</b>.</font></li>
        <li>C<font face="Verdana, Arial, Helvetica, sans-serif" size="2">lick 
          <b>Configuration Manager.</b></font></li>
        <li>C<font face="Verdana, Arial, Helvetica, sans-serif" size="2">lick 
          <b>Default Configuration.</b></font></li>
        <li>C<font face="Verdana, Arial, Helvetica, sans-serif" size="2">lick 
          <b>Connection Pools.</b></font></li>
        <li>C<font face="Verdana, Arial, Helvetica, sans-serif" size="2">lick 
          <b>JTDataSource.</b></font></li>
        <li>C<font face="Verdana, Arial, Helvetica, sans-serif" size="2">lick 
          <b>JDBC 1.x/2.x driver</b>.<br>
          </font></li>
        <li>S<font face="Verdana, Arial, Helvetica, sans-serif" size="2">elect 
          <b>Custom JDBC Information.</b></font></li>
        <li>E<font face="Verdana, Arial, Helvetica, sans-serif" size="2">nter 
          the information exactly as you would for connecting to your database, 
          except for the driver box. Set the driver box to <b>com.p6spy.engine.spy.P6SpyDriver</b>.</font></li>
      </ol>
      <blockquote> 
        <p>An example setup follows<font face="Verdana, Arial, Helvetica, sans-serif" size="2">:</font></p>
      </blockquote>
      <ul>
        <font face="Verdana, Arial, Helvetica, sans-serif" size="2"> <b><font face="Courier New, Courier, mono">URL:</font></b><font face="Courier New, Courier, mono"> 
        jdbc:solid://localhost:1313<br>
        <b>driver:</b> com.p6spy.engine.spy.P6SpyDriver<br>
        <b>database:</b><br>
        <b>server:</b> localhost:1313<br>
        <b>server name:</b><br>
        <b>user name:</b> admin<br>
        <b>password:</b> admin<br>
        <b>confirm password:</b> admin</font></font> 
      </ul>
      <blockquote> 
        <p>&nbsp;</p>
      </blockquote>
      <ol type="i" start="9">
        <li>C<font face="Verdana, Arial, Helvetica, sans-serif" size="2">lick 
          <b>Try to Connect</b>. Confirm that the ATG connection is successful.</font></li>
        <li>C<font face="Verdana, Arial, Helvetica, sans-serif" size="2">lick 
          <b>Apply Changes</b>, if the connection is successful.</font></li>
        <li>R<font face="Verdana, Arial, Helvetica, sans-serif" size="2">estart 
          ATG Dynamo by going to to http://localhost:8830 and clicking <b>Restart 
          Dynamo</b>.</font><br>
        </li>
      </ol>
    </li>
  </ol>
  </font></div>
<div align="left"> 
  <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Installation 
    is complete.<b>&nbsp;</b>When you run your application, a log file (<b>spy.log</b>) 
    is generated in the <font face="Verdana, Arial, Helvetica, sans-serif" size="2"><b>C:\ATG\Dynamo5.1\home</b></font> 
    directory. The log file contains a list of all of the database statements 
    executed. You can change both the destination of <b>spy.log </b>and what it 
    logs by editing the <b>spy.properties</b> file (see <a href="other.htm">Common 
    Property File Settings</a>).</font></font></p>
</div>
<div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"> 
  <p><a name="iplanet"></a><b><font face="Verdana, Arial, Helvetica, sans-serif" size="+1">Sun 
    iPlanet</font></b></p>
  <p><font face="Verdana, Arial, Helvetica, sans-serif" size="-1"><i><font size="2">(Contributed 
    by Michael Sgroi)</font></i></font> 
  <p>The following instructions were tested with iPlanet 6.0 Service Pack 3 and 
    should work for any release of iPlanet 6.0. To install P6Spy on Sun iPlanet, 
    complete the following steps: 
  <ol>
    <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2"> Unjar the 
      <b>p6spy-install.jar</b> file <font face="Verdana, Arial, Helvetica, sans-serif" size="2">into 
      a directory named &lt;Spy Home&gt;.</font>&nbsp;The <b>p6spy-install.jar</b> 
      file contains <b>p6spy.jar </b>and <b>spy.properties</b>.</font></li>
    <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2"> Add p6spy.jar 
      to your classpath by running the command line executable <b>kregedit</b>. 
      Under Software\iPlanet, 6.0, Java, ClassPath, modify the entry adding &lt;Spy 
      Home&gt; to the end of the classpath.</font> </li>
    <li>Modify<font face="Verdana, Arial, Helvetica, sans-serif" size="2"> your 
      application server to use the P6Spy database driver by running the command 
      line executable <b>jdbcsetup</b>. Add a new 3rd Party JDBC Configuration 
      as follows as shown in the following example:<br>
      <br>
      <font face="Courier New, Courier, mono">Driver Identifier: spy<br>
      Driver Classname: com.p6spy.engine.spy.P6SpyDriver<br>
      Driver Classpath: &lt;Spy Home&gt;\p6spy.jar</font></font></li>
  </ol>
  </font></div>
<div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"></font><font face="Verdana, Arial, Helvetica, sans-serif" size="2"></font></div>
<div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"> 
  <ol start="4">
    <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">To tell P6Spy 
      about your real database driver, register your DataSource by running the 
      following command line executable:<br>
      </font> 
      <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Courier New, Courier, mono">iasdeploy 
        regdatasource -user &lt;iPlanet admin <i>username</i>&gt; -<i>password</i> 
        &lt;iPlanet admin <i>password</i>&gt; -host localhost -<i>port</i> &lt;iPlanet 
        Admin <i>Port</i>&gt; &lt;<i>Config file name</i>&gt;</font><br>
        <br>
        where the &lt;<i>Config file name</i>&gt; is the full path to the file 
        containing your DataSource configuration. An example follows:<br>
        <br>
        <font face="Courier New, Courier, mono">&lt;ias-resource&gt;</font></font></p>
      <p><font face="Courier New, Courier, mono" size="2"> &lt;resource&gt;</font></p>
      <p><font face="Courier New, Courier, mono" size="2">&lt;jndi-name&gt;jdbc/yourapp/ora-type4-spy&lt;/jndi-name&gt;</font></p>
      <p><font face="Courier New, Courier, mono" size="2">&lt;jdbc&gt;</font></p>
      <p><font face="Courier New, Courier, mono" size="2">&lt;driver-type&gt;spy&lt;/driver-type&gt;</font></p>
      <p><font face="Courier New, Courier, mono" size="2">&lt;database-url&gt;jdbc:oracle:thin:@localhost:1521:orcl&lt;/database-url&gt;</font></p>
      <p><font face="Courier New, Courier, mono" size="2">&lt;username&gt;user&lt;/username&gt;</font></p>
      <p><font face="Courier New, Courier, mono" size="2">&lt;password&gt;password&lt;/password&gt;</font></p>
      <p><font face="Courier New, Courier, mono" size="2">&lt;/jdbc&gt;</font></p>
      <p><font face="Courier New, Courier, mono" size="2">&lt;/resource&gt;</font></p>
      <p><font face="Courier New, Courier, mono" size="2">&lt;/ias-resource&gt;</font></p>
      <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2">For more 
        details on parameters passed to iasdeploy and the format of &lt;Config 
        file name&gt; see the iPlanet documentation.</font></p>
    </li>
  </ol>
  </font></div>
<div align="left"> 
  <p><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font face="Verdana, Arial, Helvetica, sans-serif" size="4"><b><a name="unspec"></a>Unspecified 
    Application Server</b></font></font></p>
</div>
<p><font face="Verdana, Arial, Helvetica, sans-serif" size="2">The following installation 
  instructions are intended for use with application servers not listed above 
  and applications that do not use application servers. To install P6Spy, complete 
  the following steps:</font></p>
<ol>
  <li><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Unjar the <b>p6spy-install.jar</b> 
    file.&nbsp;The <b>p6spy-install.jar</b> file contains <b>p6spy.jar </b>and 
    <b>spy.properties</b>.</font> </li>
  <li> 
    <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Put 
      the <b>p6spy.jar</b> file in your classpath by copying the <b>p6spy.jar</b> 
      file into your <b>ext</b> directory. If you are using an EJB server it probably 
      has its own <b>ext</b> directory. If you are not using an EJB server, then 
      use the JDK <b>ext</b> directory, which is <b>JDK_HOME/jre/lib/ext</b>, 
      or add <b>p6spy.jar</b> to your classpath.&nbsp;Remember that if you are 
      adding <b>p6spy.jar</b> to your classpath, you must reference the JAR filename 
      directly.&nbsp;&nbsp;An example of the path in Microsoft Windows follows: 
      </font></div>
    <div align="left"></div>
    <div align="left"></div>
    <blockquote> 
      <div align="left"></div>
    </blockquote>
  </li>
</ol>
<blockquote> 
  <blockquote> 
    <div align="left"><font face="Courier New, Courier, mono" size="2">CLASSPATH=c:\p6spy\p6spy.jar</font><font face="Verdana, Arial, Helvetica, sans-serif" size="2">&nbsp;&nbsp;</font></div>
    <div align="left"> 
      <p>&nbsp;</p>
    </div>
  </blockquote>
  <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><b>Note:</b> 
    If you are using an EJB server, adding the <b>p6spy.jar</b> file to your classpath 
    may not work.&nbsp;Some EJB servers ignore the classpath, setting their own 
    on startup.</font></div>
</blockquote>
<ol start="4">
  <li> 
    <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Move 
      <b>spy.properties</b> into a directory listed in your classpath.&nbsp;For 
      example, if your classpath is <b>C:\p6spy\p6spy.jar;c:\java</b>,<b> </b>copy 
      it to the <b>java</b> directory.&nbsp;Unlike JAR files, you do not directly 
      reference your property file in the classpath.</font></div>
  </li>
  <li> 
    <div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">Modify 
      your application or server to use the P6Spy database driver.</font></div>
  </li>
</ol>
<blockquote> 
  <div align="left"></div>
</blockquote>
<div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"> 
  </font><font face="Verdana, Arial, Helvetica, sans-serif" size="2"> </font></div>
<div align="left"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"> 
  <p>&nbsp;</p>
  </font></div>
<!-- #EndEditable --> <br>
<table width="100%" border="0" bgcolor="black">
<tr>
<td>
<table width="580" border="0">
  <tr> 
    <td width="11%"><a href="http://www.p6spy.com"><img src="http://www.p6spy.com/documentation/images/p6spy_com.gif" width="110" height="20" border="0"></a></td>
    <td width="11%"><a href="http://www.p6spy.com/documentation/index.htm"><img src="http://www.p6spy.com/documentation/images/index.gif" width="110" height="20" border="0"></a></td>
    <td width="11%"><a href="http://www.p6spy.com/documentation/install.htm"><img src="http://www.p6spy.com/documentation/images/install.gif" width="110" height="20" border="0"></a></td>
    <td width="11%"><a href="http://www.p6spy.com/documentation/p6log.htm"><img src="http://www.p6spy.com/documentation/images/p6log.gif" width="110" height="20" border="0"></a></td>
    <td width="11%"><a href="http://www.p6spy.com/documentation/p6outage.htm"><img src="http://www.p6spy.com/documentation/images/p6outage.gif" width="110" height="20" border="0"></a></td>
    <td width="38%">&nbsp;</td>
  </tr>
</table>
</td>
</tr>
</table>
</body>
<!-- #EndTemplate --></html>
